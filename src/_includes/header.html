<!-- ============================================ -->
<!--                 Navigation                   -->
<!-- ============================================ -->
{% set navPages = collections.all | eleventyNavigation %}

<!-- Utility bar -->
<div class="utility">
  <div class="container util-inner">
    <nav class="util-left">
      <a href="/about">About Us</a>
      <span class="sep">|</span>
      <a href="/contact">Contact Us</a>
      <span class="sep">|</span>
      <a href="#">FAQâ€™s</a>
      <span class="sep">|</span>
      <a href="#">Wholesale</a>
      <span class="sep">|</span>
      <a href="#">Military Discounts</a>
    </nav>
    <nav class="util-right">
      <a href="mailto:contact@lazaruslabs.com">contact@lazaruslabs.com</a>
      <span class="sep">|</span>
      <a href="#">Login / Register</a>
    </nav>
  </div>
</div>

<!-- Main bar -->
<div class="mainbar">
  <div class="container main-inner">
    <!-- Left: logo + burger -->
    <div class="left">
<!-- Replace your current logo block with this -->
<a class="logo" href="#" aria-label="Lazarus Labs">
  <img
    src="/assets/images/lazaruslabs.png"
    alt="Lazarus Labs"
    width="140"
    style="display:block; height:auto;"
  />
</a>

      <button class="burger" aria-label="Open menu">
        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
          <path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z" fill="currentColor"/>
        </svg>
      </button>
    </div>

    <!-- Center: search -->
    <form class="search" action="/" method="get">
      <span class="icon">
        <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
          <path d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 10-.71.71l.27.28v.79L20 20.5 21.5 19l-6-5zM10 15a5 5 0 110-10 5 5 0 010 10z" fill="currentColor"/>
        </svg>
      </span>
      <input type="search" name="s" placeholder="Search for products" aria-label="Search">
      <button class="sbtn" type="submit">Search</button>
    </form>

    <!-- Right: locale + cart -->
    <div class="right">
      <div class="locale" id="localeBtn" role="button" aria-haspopup="listbox" aria-expanded="false">
        <span class="flag" aria-hidden="true">ğŸ‡ºğŸ‡¸</span>
        <span class="country">USA</span>
        <svg viewBox="0 0 24 24" width="16" height="16" class="chev" aria-hidden="true"><path d="M7 10l5 5 5-5z" fill="currentColor"/></svg>
      </div>
      <div class="locale-menu" id="localeMenu" role="listbox" tabindex="-1">
        <button role="option" data-country="USA">ğŸ‡ºğŸ‡¸ USA</button>
        <button role="option" data-country="CAN">ğŸ‡¨ğŸ‡¦ Canada</button>
        <button role="option" data-country="GBR">ğŸ‡¬ğŸ‡§ UK</button>
      </div>

      <a class="cart" href="#" aria-label="Cart">
        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
          <path d="M7 4h-2l-1 2v2h2l3.6 7.59-1.35 2.44A1 1 0 0 0 9.1 19h9.4v-2H10.42a.25.25 0 0 1-.22-.37L11 15h6.55a2 2 0 0 0 1.79-1.11l3.58-7.16A1 1 0 0 0 22 5h-15zM7 20a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm10 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" fill="currentColor"/>
        </svg>
        <span class="badge" id="cartCount">0</span>
      </a>
    </div>
  </div>

  <!-- navbar-only JS (locale + demo cart) -->
  <script>
  (function(){
    const btn = document.getElementById('localeBtn');
    const menu = document.getElementById('localeMenu');
    const countryText = btn?.querySelector('.country');

    function closeMenu(){ menu.style.display = 'none'; btn.setAttribute('aria-expanded','false'); }
    function openMenu(){ menu.style.display = 'block'; btn.setAttribute('aria-expanded','true'); }

    btn?.addEventListener('click', (e)=>{
      e.stopPropagation();
      const open = menu.style.display === 'block';
      open ? closeMenu() : openMenu();
    });
    document.addEventListener('click', closeMenu);

    menu?.querySelectorAll('button').forEach(b=>{
      b.addEventListener('click', ()=>{
        countryText.textContent = b.dataset.country === 'USA' ? 'USA'
          : b.dataset.country === 'CAN' ? 'Canada' : 'UK';
        closeMenu();
      });
    });
    // Example: drive the cart badge from your logic
    // document.getElementById('cartCount').textContent = 3;
  })();
  </script>
</div>

<!-- ===== OFF-CANVAS DRAWER (shared by header burger + side FAB) ===== -->
<aside class="drawer" id="drawer" aria-hidden="true" aria-labelledby="drawerTitle">
  <div class="drawer-panel" role="dialog" aria-modal="true">
    <div class="drawer-head">
      <button class="drawer-close" id="drawerClose" aria-label="Close menu">
        <svg viewBox="0 0 24 24" width="22" height="22"><path d="M18.3 5.7L12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3 10.6 10.6 16.9 4.3z" fill="currentColor"/></svg>
        <span>Close</span>
      </button>
    </div>

    <!-- Tabs -->
    <div class="drawer-tabs" role="tablist" aria-label="Main menu tabs">
      <button class="tab active" role="tab" aria-selected="true" aria-controls="tabCats" id="tabCatsBtn">CATEGORIES</button>
      <button class="tab" role="tab" aria-selected="false" aria-controls="tabMenu" id="tabMenuBtn">MENU</button>
    </div>

    <!-- Panels -->
    <div class="drawer-body">
      <!-- Categories -->
     <div class="tabpanel show" id="tabCats" role="tabpanel" aria-labelledby="tabCatsBtn">
  <a class="row" data-cat="aliquots"    href="/sarms-performance"><span class="ico">ğŸ§ª</span><span>Sarms and Performance</span></a>
  <a class="row" data-cat="peptides"       href="/peptides"><span class="ico">ğŸ§´</span><span>Peptides</span></a>
  <!-- <a class="row" data-cat="ancillaries" href="#"><span class="ico">ğŸ§°</span><span>Ancillaries</span></a> -->
  <!-- <a class="row" data-cat="capsules"    href="#"><span class="ico">ğŸ’Š</span><span>Capsules</span></a> -->
  <!-- <a class="row" data-cat="liquids"     href="#"><span class="ico">ğŸ§«</span><span>Liquids</span></a> -->
  <a class="row" data-cat="supplies"    href="/supplies"><span class="ico">ğŸ“¦</span><span>Supplies</span></a>
  <!-- <a class="row" data-cat="wholesale"   href="#"><span class="ico">ğŸ·ï¸</span><span>Wholesale</span></a> -->
</div>


      <!-- Menu -->
      <div class="tabpanel" id="tabMenu" role="tabpanel" aria-labelledby="tabMenuBtn" hidden>
        <a class="row" href="/"><span class="ico">ğŸ </span><span>Home</span></a>
        <a class="row" href="/about"><span class="ico">ğŸ‘¥</span><span>About Us</span></a>
        <a class="row" href="/contact"><span class="ico">âœ‰ï¸</span><span>Contact Us</span></a>
        <a class="row" href="#"><span class="ico">ğŸ–ï¸</span><span>Military Discounts</span></a>
      </div>
    </div>
    <style>
        /* highlight a row when opened from the side icons */
.tabpanel .row.highlight { background:#eefaff; box-shadow:inset 3px 0 0 #20a9d6; font-weight:700; }

    </style>
  </div>
  <!-- Backdrop -->
  <div class="drawer-backdrop" id="drawerBackdrop" tabindex="-1" aria-hidden="true"></div>

  <!-- Drawer JS (exports open/close globally) -->
<script>
(function(){
  const drawer = document.getElementById('drawer');
  const panel  = drawer.querySelector('.drawer-panel');
  const backdrop = document.getElementById('drawerBackdrop');
  const btnBurger = document.querySelector('.burger');
  const btnClose  = document.getElementById('drawerClose');

  const tabCatsBtn = document.getElementById('tabCatsBtn');
  const tabMenuBtn = document.getElementById('tabMenuBtn');
  const tabCats = document.getElementById('tabCats');
  const tabMenu = document.getElementById('tabMenu');

  function openDrawer(){
    drawer.classList.add('open');
    drawer.setAttribute('aria-hidden','false');
    document.body.classList.add('noscroll');
    btnClose?.focus();
  }
  function closeDrawer(){
    drawer.classList.remove('open');
    drawer.setAttribute('aria-hidden','true');
    document.body.classList.remove('noscroll');
    btnBurger?.focus();
  }

  btnBurger?.addEventListener('click', openDrawer);
  btnClose?.addEventListener('click', closeDrawer);
  backdrop?.addEventListener('click', closeDrawer);
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && drawer.classList.contains('open')) closeDrawer(); });

  function activateTab(which){
    const isCats = which === 'cats';
    tabCatsBtn.classList.toggle('active', isCats);
    tabMenuBtn.classList.toggle('active', !isCats);
    tabCats.hidden = !isCats;
    tabMenu.hidden = isCats;
    tabCatsBtn.setAttribute('aria-selected', String(isCats));
    tabMenuBtn.setAttribute('aria-selected', String(!isCats));
  }
  tabCatsBtn?.addEventListener('click', ()=> activateTab('cats'));
  tabMenuBtn?.addEventListener('click', ()=> activateTab('menu'));
  activateTab('cats');

  /* Export for other triggers */
  window.openMainMenuDrawer  = openDrawer;
  window.closeMainMenuDrawer = closeDrawer;
  window._activateCatsTab = () => activateTab('cats');
})();
</script>

<script>
/* Open the drawer on the CATEGORIES tab and highlight a specific row */
window.showCategoryInDrawer = function(catKey){
  if (typeof window.openMainMenuDrawer === 'function') window.openMainMenuDrawer();
  if (typeof window._activateCatsTab === 'function') window._activateCatsTab();

  requestAnimationFrame(()=>{
    const row = document.querySelector(`#tabCats .row[data-cat="${catKey}"]`);
    if (!row) return;
    row.scrollIntoView({ block: 'center' });
    row.classList.add('highlight');
    setTimeout(()=> row.classList.remove('highlight'), 900);
  });
};
</script>

</aside>

<!-- ===== SIDE STRIP (outside the drawer) ===== -->
<aside class="side-strip" aria-label="Quick category nav">
  <button class="fab" id="sideToggle" aria-label="Open menu">â˜°</button>

<nav class="side-dots" id="sideDots">
  <a class="dot" data-cat="aliquots"    aria-label="Aliquots/Injectables"> <span class="ico">ğŸ§ª</span> </a>
  <a class="dot" data-cat="sarms"       aria-label="SARMâ€™s">               <span class="ico">ğŸ§´</span> </a>
  <!-- <a class="dot" data-cat="ancillaries" aria-label="Ancillaries">          <span class="ico">ğŸ§°</span> </a> -->
  <!-- <a class="dot" data-cat="capsules"    aria-label="Capsules">             <span class="ico">ğŸ’Š</span> </a> -->
  <!-- <a class="dot" data-cat="liquids"     aria-label="Liquids">              <span class="ico">ğŸ§«</span> </a> -->
  <a class="dot" data-cat="supplies"    aria-label="Supplies">             <span class="ico">ğŸ“¦</span> </a>
  <!-- <a class="dot" data-cat="wholesale"   aria-label="Wholesale">            <span class="ico">ğŸ·ï¸</span> </a> -->
</nav>


</aside>

<!-- Minimal CSS for drawer + side strip -->
<style>
:root{
  --header-h: 86px; /* adjust to your navbar height */
  --panel:#fff; --border:#e9e2d8; --ink:#1f2937; --muted:#8b8f97;
  --tab-underline:#3aaed3; --blue:#20a9d6; --tile:#fff; --tile-border:#ece5db;
}

/* ===== Drawer ===== */
.drawer{ position:fixed; inset:0; z-index:1200; display:grid; grid-template-columns:auto 1fr; pointer-events:none; }
.drawer.open{ pointer-events:auto; }
.drawer-backdrop{ background:rgba(0,0,0,.45); opacity:0; transition:opacity .25s ease; }
.drawer.open .drawer-backdrop{ opacity:1; }
.drawer-panel{
  width:min(88vw, 360px); max-width:420px; height:100%;
  background:var(--panel); box-shadow:0 10px 40px rgba(0,0,0,.18);
  transform:translateX(-100%); transition:transform .28s ease; display:flex; flex-direction:column;
}
.drawer.open .drawer-panel{ transform:none; }
.drawer-head{ display:flex; align-items:center; min-height:56px; padding:0 16px; border-bottom:1px solid var(--border); }
.drawer-close{ display:flex; align-items:center; gap:8px; border:0; background:none; cursor:pointer; color:var(--ink); font-size:16px; padding:8px 4px; }
.drawer-tabs{ display:flex; border-bottom:1px solid var(--border); }
.tab{ flex:1; padding:14px 16px; border:0; background:#fff; cursor:pointer; color:#4b5563; font-weight:700; border-right:1px solid var(--border); }
.tab:last-child{ border-right:0; }
.tab.active{ color:var(--ink); position:relative; }
.tab.active::after{ content:""; position:absolute; left:0; right:0; bottom:-1px; height:3px; background:var(--tab-underline); }
.drawer-body{ overflow:auto; -webkit-overflow-scrolling:touch; }
.tabpanel .row{ display:flex; align-items:center; gap:12px; min-height:54px; padding:14px 18px; text-decoration:none; color:var(--ink); border-bottom:1px solid var(--border); }
.tabpanel .row:hover{ background:#f7f5f2; }
.ico{ width:22px; text-align:center; opacity:.9; }
body.noscroll{ overflow:hidden; }
/* Hide the side strip while drawer is open */
body.noscroll .side-strip{ display:none; }

/* ===== Side strip ===== */
.side-strip{
  position: fixed; top: calc(var(--header-h) + 8px); left: 10px; z-index: 1199;
  display:flex; flex-direction:column; gap:10px;
}
.fab{
  width: 46px; height: 46px; border-radius:999px; border:0; background:var(--blue);
  color:#fff; font: 800 16px/1 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  display:grid; place-items:center; box-shadow:0 10px 26px rgba(0,0,0,.18); cursor:pointer;
}
.side-dots{ display:flex; flex-direction:column; gap:12px; }
.dot{
  width:34px; height:34px; display:grid; place-items:center; border-radius:8px;
  background:var(--tile); border:1px solid var(--tile-border);
  box-shadow:0 6px 14px rgba(0,0,0,.08); text-decoration:none;
  transition:transform .12s ease, box-shadow .12s ease, border-color .12s ease; position:relative;
}
.dot:hover{ transform: translateY(-1px); }
.dot img{ width:22px; height:22px; object-fit:contain; filter:saturate(.95); }
.dot.active{ border-color:#bfeaf7; box-shadow:0 0 0 2px #e2f7ff, 0 8px 18px rgba(0,0,0,.10); }
.dot .tip{
  position:absolute; left:46px; top:50%; transform:translateY(-50%);
  background:#111827; color:#fff; padding:6px 9px; border-radius:8px; font-size:12px; white-space:nowrap;
  opacity:0; pointer-events:none; transition:opacity .15s ease; box-shadow:0 8px 18px rgba(0,0,0,.16);
}
.dot:hover .tip{ opacity:1; }
@media (max-width: 900px){ .side-strip{ display:none; } }
</style>

<!-- Side strip JS: open drawer + scroll-spy -->
<script>
/* Side FAB opens the drawer */
document.getElementById('sideToggle')?.addEventListener('click', (e)=>{
  e.preventDefault();
  if (typeof window.openMainMenuDrawer === 'function') window.openMainMenuDrawer();
  else document.querySelector('.burger')?.click();
});

/* Hover/tap a tiny icon -> open drawer on CATEGORIES and spotlight that row */
const sideDots = Array.from(document.querySelectorAll('.side-dots .dot'));
let hoverTimer;

function triggerShow(cat){
  if (typeof window.showCategoryInDrawer === 'function') window.showCategoryInDrawer(cat);
  else if (typeof window.openMainMenuDrawer === 'function') window.openMainMenuDrawer();
}

sideDots.forEach(dot=>{
  const cat = dot.dataset.cat;

  // small delay avoids accidental opens when just passing by
  dot.addEventListener('mouseenter', ()=> { hoverTimer = setTimeout(()=> triggerShow(cat), 120); });
  dot.addEventListener('mouseleave', ()=> clearTimeout(hoverTimer));

  dot.addEventListener('click', (e)=>{ e.preventDefault(); triggerShow(cat); });
});
</script>
