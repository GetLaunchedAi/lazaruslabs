<!-- ============================================ -->
<!--                 Navigation                   -->
<!-- ============================================ -->
{% set navPages = collections.all | eleventyNavigation %}

<!-- ========== Utility bar ========== -->
<div class="utility">
  <div class="container util-inner">
    <nav class="util-left" aria-label="Utility">
      <a href="/about">About Us</a>
      <span class="sep" aria-hidden="true">|</span>
      <a href="/contact">Contact Us</a>
      <span class="sep" aria-hidden="true">|</span>
      <a href="/faqs">FAQâ€™s</a>
    </nav>
    <nav class="util-right">
      <a href="mailto:contact@lazaruslabs.com">contact@lazaruslabs.com</a>
      <span class="sep" aria-hidden="true">|</span>
      <a href="/admin/">Admin</a>
    </nav>
  </div>
</div>

<!-- ========== Main bar (logo, search, cart) ========== -->
<div class="mainbar" role="navigation" aria-label="Primary">
  <div class="container main-inner">
    <!-- Left: logo + burger -->
    <div class="left">
      <a class="logo" href="/" aria-label="Lazarus Labs">
        <img src="/assets/images/lazaruslabs.png" alt="Lazarus Labs" width="140" style="display:block;height:auto;">
      </a>

      <button class="burger" aria-label="Open menu">
        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
          <path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z" fill="currentColor" />
        </svg>
      </button>
    </div>

    <!-- Center: product search -->
    <div>
      <form class="product-search" role="search" autocomplete="off" onsubmit="return false;">
        <span class="icon" aria-hidden="true">
          <svg viewBox="0 0 24 24" width="18" height="18">
            <path
              d="M15.5 14h-.79l-.28-.27a6.5 6.5 0 10-.71.71l.27.28v.79L20 20.5 21.5 19l-6-5zM10 15a5 5 0 110-10 5 5 0 010 10z"
              fill="currentColor" />
          </svg>
        </span>
        <div class="sr-only" aria-live="polite"></div>
        <input id="productSearch" class="ps-input" type="search" name="ps" placeholder="Search for productsâ€¦"
          aria-label="Search products" aria-autocomplete="list" aria-haspopup="listbox" aria-expanded="false"
          aria-controls="psResults" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false"
          enterkeyhint="search" inputmode="search">
        <div id="psResults" class="ps-results" role="listbox" hidden></div>
      </form>
    </div>
    <link rel="stylesheet" href="/css/search.css">
    <script src="/assets/js/search.js" defer></script>

    <!-- Right: locale + cart -->
    <div class="right">
      <!-- <div class="locale" id="localeBtn" role="button" aria-haspopup="listbox" aria-expanded="false" tabindex="0">
        <span class="flag" aria-hidden="true">ðŸ‡ºðŸ‡¸</span>
        <span class="country">USA</span>
        <svg viewBox="0 0 24 24" width="16" height="16" class="chev" aria-hidden="true">
          <path d="M7 10l5 5 5-5z" fill="currentColor" />
        </svg>
      </div>
      <div class="locale-menu" id="localeMenu" role="listbox" tabindex="-1">
        <button role="option" data-country="USA">ðŸ‡ºðŸ‡¸ USA</button>
        <button role="option" data-country="CAN">ðŸ‡¨ðŸ‡¦ Canada</button>
        <button role="option" data-country="GBR">ðŸ‡¬ðŸ‡§ UK</button>
      </div> -->

      <a class="cart" href="/cart.php" aria-label="Cart">
        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
          <path
            d="M7 4h-2l-1 2v2h2l3.6 7.59-1.35 2.44A1 1 0 0 0 9.1 19h9.4v-2H10.42a.25.25 0 0 1-.22-.37L11 15h6.55a2 2 0 0 0 1.79-1.11l3.58-7.16A1 1 0 0 0 22 5h-15zM7 20a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm10 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4z"
            fill="currentColor" />
        </svg>
        <span class="badge" id="cartCount">0</span>
      </a>
    </div>
  </div>

  <!-- Mainbar JS (locale + cart badge) -->
  <script>
    function getCart() { try { return JSON.parse(localStorage.getItem('cart')) || []; } catch { return []; } }
    function saveCart(cart) { localStorage.setItem('cart', JSON.stringify(cart)); window.dispatchEvent(new Event('cart:changed')); }
    function updateCartBadge() {
      const el = document.getElementById('cartCount'); if (!el) return;
      const count = getCart().reduce((n, i) => n + (Number(i.quantity) || 0), 0);
      el.textContent = String(count);
      if (count <= 0) el.setAttribute('hidden', ''); else el.removeAttribute('hidden');
    }
    document.addEventListener('DOMContentLoaded', updateCartBadge);
    window.addEventListener('cart:changed', updateCartBadge);
    window.addEventListener('storage', (e) => { if (e.key === 'cart') updateCartBadge(); });
  </script>
</div>

<!-- ========== Off-canvas drawer (MENU only; IMG icons) ========== -->
<aside class="drawer" id="drawer" aria-hidden="true" aria-labelledby="drawerTitle">
  <div class="drawer-panel" role="dialog" aria-modal="true">
    <div class="drawer-head">
      <button class="drawer-close" id="drawerClose" aria-label="Close menu">
        <svg viewBox="0 0 24 24" width="22" height="22" aria-hidden="true">
          <path
            d="M18.3 5.7L12 12l6.3 6.3-1.4 1.4L10.6 13.4 4.3 19.7 2.9 18.3 9.2 12 2.9 5.7 4.3 4.3 10.6 10.6 16.9 4.3z"
            fill="currentColor" />
        </svg>
        <span>Close</span>
      </button>
    </div>

    <div class="drawer-body" role="navigation" aria-label="Main menu">
      <nav class="menu-list">
        <a class="row" href="/">
          <img class="ico-img" src="/assets/icons/home.png" alt="" />
          <span>Home</span>
        </a>
        <a class="row" href="/catalog">
          <img class="ico-img" src="/assets/icons/cart.png" alt="" />
          <span>Shop</span>
        </a>
        <a class="row" href="/about">
          <img class="ico-img" src="/assets/icons/people.png" alt="" />
          <span>About Us</span>
        </a>
        <a class="row" href="/contact">
          <img class="ico-img" src="/assets/icons/mail.png" alt="" />
          <span>Contact Us</span>
        </a>
        <a class="row" href="/faqs">
          <img class="ico-img" src="/assets/icons/help.png" alt="" />
          <span>FAQâ€™s</span>
        </a>
        <!-- <a class="row" href="#">
          <img class="ico-img" src="/assets/icons/medal.png" alt="" />
          <span>Military Discounts</span>
        </a> -->
      </nav>
    </div>
  </div>

  <div class="drawer-backdrop" id="drawerBackdrop" tabindex="-1" aria-hidden="true"></div>

  <script>
    (function () {
      const drawer = document.getElementById('drawer');
      const backdrop = document.getElementById('drawerBackdrop');
      const btnBurger = document.querySelector('.burger');
      const btnClose = document.getElementById('drawerClose');

      function openDrawer() { drawer.classList.add('open'); drawer.setAttribute('aria-hidden', 'false'); document.body.classList.add('noscroll'); btnClose?.focus(); }
      function closeDrawer() { drawer.classList.remove('open'); drawer.setAttribute('aria-hidden', 'true'); document.body.classList.remove('noscroll'); btnBurger?.focus(); }

      btnBurger?.addEventListener('click', openDrawer);
      btnClose?.addEventListener('click', closeDrawer);
      backdrop?.addEventListener('click', closeDrawer);
      document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && drawer.classList.contains('open')) closeDrawer(); });

      // expose helpers
      window.openMainMenuDrawer = openDrawer;
      window.closeMainMenuDrawer = closeDrawer;
    })();
  </script>
</aside>

<!-- ========== SIDE STRIP (mirrors MENU; IMG icons; centered) ========== -->
<aside class="side-strip" aria-label="Quick navigation">
  <button class="fab" id="sideToggle" aria-label="Open menu">â˜°</button>

  <nav class="side-dots" id="sideDots">
    <!-- Replace src values with your actual icon files (PNG/SVG). -->
    <a class="dot" href="/" aria-label="Home">
      <img src="/assets/icons/home.png" alt="" />
      <span class="tip">Home</span>
    </a>
    <a class="dot" href="/catalog" aria-label="Shop">
      <img src="/assets/icons/cart.png" alt="" />
      <span class="tip">Shop</span>
    </a>
    <a class="dot" href="/about" aria-label="About Us">
      <img src="/assets/icons/people.png" alt="" />
      <span class="tip">About Us</span>
    </a>
    <a class="dot" href="/contact" aria-label="Contact Us">
      <img src="/assets/icons/mail.png" alt="" />
      <span class="tip">Contact Us</span>
    </a>
    <a class="dot" href="/faqs" aria-label="FAQâ€™s">
      <img src="/assets/icons/help.png" alt="" />
      <span class="tip">FAQâ€™s</span>
    </a>
    <!-- <a class="dot" href="#" aria-label="Military Discounts">
      <img src="/assets/icons/medal.png" alt="" />
      <span class="tip">Military Discounts</span>
    </a> -->
  </nav>
</aside>

<!-- ========== Styles (drawer + side strip + cart badge) ========== -->
<style>
  :root {
    --header-h: 86px;
    --panel: #fff;
    --border: #e9e2d8;
    --ink: #1f2937;
    --muted: #8b8f97;
    --tile: #fff;
    --tile-border: #ece5db;
    --blue: #20a9d6;
  }

  /* Utility bar (optional minimal styles) */
  .utility {
    background: #f7f5f2;
    font: 500 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }

  .utility .util-inner {
    max-width: 1200px;
    margin: 0 auto;
    padding: 8px 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .utility a {
    color: #1f2937;
    text-decoration: none;
  }

  .utility .sep {
    color: #8b8f97;
    margin: 0 8px;
  }

  /* Main bar container */
  .mainbar .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 14px 16px;
    display: grid;
    grid-template-columns: auto 1fr auto;
    align-items: center;
    gap: 2rem;
  }

  .mainbar .left {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .burger {
    border: 0;
    background: #fff;
    width: 40px;
    height: 40px;
    display: grid;
    place-items: center;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, .08);
    cursor: pointer;
  }

  .product-search {
    position: relative;
    display: flex;
    align-items: center;
    gap: 8px;
    background: #fff;
    border: 1px solid #ece5db;
    border-radius: 12px;
    padding: 8px 10px;
  }

  .product-search .ps-input {
    border: 0;
    outline: 0;
    width: 100%;
    font: 500 14px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    color: #111827;
  }

  .product-search .icon {
    display: grid;
    place-items: center;
  }

  .mainbar .right {
    display: flex;
    align-items: center;
    gap: 12px;
    justify-content: flex-end;
  }

  .locale {
    display: flex;
    align-items: center;
    gap: 6px;
    background: #fff;
    border: 1px solid #ece5db;
    border-radius: 10px;
    padding: 6px 10px;
    cursor: pointer;
  }

  .locale-menu {
    position: absolute;
    display: none;
    background: #fff;
    border: 1px solid #ece5db;
    border-radius: 10px;
    padding: 6px;
    margin-top: 6px;
  }

  .locale-menu button {
    display: block;
    width: 100%;
    text-align: left;
    padding: 8px 10px;
    border: 0;
    background: #fff;
    cursor: pointer;
    border-radius: 8px;
  }

  .locale-menu button:hover {
    background: #f7f5f2;
  }

  /* Cart badge tidy */
  .mainbar .right .cart {
    position: relative;
    display: inline-grid;
    place-items: center;
    width: 28px;
    height: 28px;
    padding: 0;
    background: transparent;
    border-radius: 0;
  }

  .mainbar .right .cart svg {
    display: block;
    width: 22px;
    height: 22px;
  }

  .mainbar .right .cart .badge {
    position: absolute;
    top: -6px;
    right: -6px;
    min-width: 16px;
    height: 16px;
    padding: 0 4px;
    border-radius: 999px;
    background: #20a9d6;
    color: #fff;
    font: 700 11px/16px system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0, 0, 0, .18);
  }

  .mainbar .right .cart .badge[hidden] {
    display: none;
  }

  /* Drawer */
  .drawer {
    position: fixed;
    inset: 0;
    z-index: 1200;
    display: grid;
    grid-template-columns: auto 1fr;
    pointer-events: none;
  }

  .drawer.open {
    pointer-events: auto;
  }

  .drawer-backdrop {
    background: rgba(0, 0, 0, .45);
    opacity: 0;
    transition: opacity .25s ease;
  }

  .drawer.open .drawer-backdrop {
    opacity: 1;
  }

  .drawer-panel {
    width: min(88vw, 360px);
    max-width: 420px;
    height: 100%;
    background: var(--panel);
    box-shadow: 0 10px 40px rgba(0, 0, 0, .18);
    transform: translateX(-100%);
    transition: transform .28s ease;
    display: flex;
    flex-direction: column;
  }

  .drawer.open .drawer-panel {
    transform: none;
  }

  .drawer-head {
    display: flex;
    align-items: center;
    min-height: 56px;
    padding: 0 16px;
    border-bottom: 1px solid var(--border);
  }

  .drawer-close {
    display: flex;
    align-items: center;
    gap: 8px;
    border: 0;
    background: none;
    cursor: pointer;
    color: var(--ink);
    font-size: 16px;
    padding: 8px 4px;
  }

  .drawer-body {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }

  /* Drawer menu rows (IMG icons) */
  .menu-list .row {
    display: flex;
    align-items: center;
    gap: 12px;
    min-height: 54px;
    padding: 14px 18px;
    text-decoration: none;
    color: var(--ink);
    border-bottom: 1px solid var(--border);
  }

  .menu-list .row:hover {
    background: #f7f5f2;
  }

  .menu-list .ico-img {
    width: 22px;
    height: 22px;
    display: block;
    object-fit: contain;
    flex: 0 0 22px;
    filter: saturate(.95);
    /* optional subtle polish */
  }

  /* Prevent body scroll when drawer open */
  body.noscroll {
    overflow: hidden;
  }

  /* Side strip */
  .side-strip {
    position: fixed;
    top: calc(var(--header-h) + 8px);
    left: 10px;
    z-index: 1199;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .fab {
    width: 50px;
    height: 50px;
    border-radius: 999px;
    border: 0;
    background: var(--blue);
    color: #fff;
    font: 800 18px/1 system-ui, -apple-system, Segoe UI, Montserrat, Arial, sans-serif;
    display: grid;
    place-items: center;
    box-shadow: 0 10px 26px rgba(0, 0, 0, .18);
    cursor: pointer;
  }

  .side-dots {
    display: flex;
    flex-direction: column;
    gap: 14px;
  }

  .dot {
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    background: var(--tile);
    border: 1px solid var(--tile-border);
    box-shadow: 0 6px 14px rgba(0, 0, 0, .08);
    text-decoration: none;
    position: relative;
    transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
  }

  .dot:hover {
    transform: translateY(-1px);
  }

  .dot img {
    display: block;
    width: 28px;
    height: 28px;
    object-fit: contain;
    pointer-events: none;
  }

  /* perfectly centered icons */
  .dot .tip {
    position: absolute;
    left: 56px;
    top: 50%;
    transform: translateY(-50%);
    background: #111827;
    color: #fff;
    padding: 6px 9px;
    border-radius: 8px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity .15s ease;
    box-shadow: 0 8px 18px rgba(0, 0, 0, .16);
  }

  .dot:hover .tip {
    opacity: 1;
  }

  @media (max-width: 900px) {
    .side-strip {
      display: none;
    }

    .mainbar .container {
      grid-template-columns: 1fr auto auto;
    }
  }
</style>

<!-- Side strip JS -->
<script>
  // FAB opens the same MENU drawer
  document.getElementById('sideToggle')?.addEventListener('click', (e) => {
    e.preventDefault();
    if (typeof window.openMainMenuDrawer === 'function') window.openMainMenuDrawer();
    else document.querySelector('.burger')?.click();
  });
</script>